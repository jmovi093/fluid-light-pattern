{"version":3,"file":"index.cjs","sources":["../src/useFluidAnimation.ts","../src/useLightBlobs.ts","../src/config.ts","../src/FluidLightPattern.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\nimport type { FluidLightConfig, FluidUniforms } from './types';\r\n\r\nconst vertexShader = `\r\n  attribute vec2 position;\r\n  void main() { gl_Position = vec4(position, 0.0, 1.0); }\r\n`;\r\n\r\nconst fragmentShader = `\r\n  precision mediump float;\r\n  uniform vec2 iResolution;\r\n  uniform float iTime;\r\n  uniform vec3 bg_color;\r\n  uniform vec3 p1_color;\r\n  uniform vec3 p2_color;\r\n  uniform vec3 p3_color;\r\n  uniform vec3 p4_color;\r\n  uniform float p1_opacity;\r\n  uniform float p2_opacity;\r\n  uniform float p3_opacity;\r\n  uniform float p4_opacity;\r\n  uniform float p1_scale;\r\n  uniform float p2_scale;\r\n  uniform float p3_scale;\r\n  uniform float p4_scale;\r\n\r\n  float pattern1(vec2 c, float s) {\r\n    c /= s;\r\n    vec2 g = mod(floor(c * 0.5), 2.0);\r\n    return mod(g.x + g.y, 2.0);\r\n  }\r\n\r\n  float pattern2(vec2 c, float s) {\r\n    c /= s;\r\n    vec2 p = mod(c, 10.0) / 10.0;\r\n    float g1 = step(p.x + p.y, 0.5);\r\n    float g2 = step((1.0 - p.x) + p.y, 0.5);\r\n    float g3 = step(p.x + (1.0 - p.y), 0.5);\r\n    float g4 = step((1.0 - p.x) + (1.0 - p.y), 0.5);\r\n    return max(max(g1, g2), max(g3, g4));\r\n  }\r\n\r\n  float pattern3(vec2 c, float s) {\r\n    c /= s;\r\n    vec2 p = mod(c, 20.0);\r\n    return step(p.y, p.x);\r\n  }\r\n\r\n  float pattern4(vec2 c, float s) {\r\n    c /= s;\r\n    vec2 p = mod(c, 20.0);\r\n    return step(p.x, p.y);\r\n  }\r\n\r\n  void main() {\r\n    vec2 fc = gl_FragCoord.xy;\r\n    float mr = min(iResolution.x, iResolution.y);\r\n    vec2 uv = (fc * 2.0 - iResolution.xy) / mr;\r\n    \r\n    // Linear waves\r\n    float d = -iTime * 0.15, a = 0.0;\r\n    for (float i = 0.0; i < 4.0; ++i) {\r\n      a += cos(i - d - a * uv.x * 0.5);\r\n      d += sin(uv.y * i + a * 0.5);\r\n    }\r\n    d += iTime * 0.15;\r\n    float linearWave = sin(d * 0.5 + a * 0.6) * 0.5 + 0.5;\r\n    \r\n    // Radial waves\r\n    float radialWaves = 0.0;\r\n    \r\n    vec2 center1 = vec2(-0.6, 0.4);\r\n    float dist1 = length(uv - center1);\r\n    radialWaves += sin(dist1 * 8.0 - iTime * 0.5) * 0.5 + 0.5;\r\n    \r\n    vec2 center2 = vec2(0.5, -0.3);\r\n    float dist2 = length(uv - center2);\r\n    radialWaves += sin(dist2 * 6.0 - iTime * 0.375) * 0.5 + 0.5;\r\n    \r\n    vec2 center3 = vec2(0.0, 0.0);\r\n    float dist3 = length(uv - center3);\r\n    radialWaves += sin(dist3 * 10.0 - iTime * 0.625) * 0.5 + 0.5;\r\n    \r\n    radialWaves /= 3.0;\r\n    \r\n    // Combine waves\r\n    float fv = mix(linearWave, radialWaves, 0.5);\r\n    \r\n    // Calculate patterns\r\n    float p1 = pattern1(fc, p1_scale);\r\n    float p2 = pattern2(fc, p2_scale);\r\n    float p3 = pattern3(fc, p3_scale);\r\n    float p4 = pattern4(fc, p4_scale);\r\n    \r\n    float pm; vec3 pc; float op;\r\n    \r\n    if (fv < 0.25) {\r\n      pm = p1;\r\n      pc = p1_color;\r\n      op = p1_opacity;\r\n    } else if (fv < 0.5) {\r\n      pm = p2;\r\n      pc = p2_color;\r\n      op = p2_opacity;\r\n    } else if (fv < 0.75) {\r\n      pm = p3;\r\n      pc = p3_color;\r\n      op = p3_opacity;\r\n    } else {\r\n      pm = p4;\r\n      pc = p4_color;\r\n      op = p4_opacity;\r\n    }\r\n    \r\n    gl_FragColor = vec4(mix(bg_color, pc, pm * op), 1.0);\r\n  }\r\n`;\r\n\r\nfunction hexToRgb(hex: string): [number, number, number] {\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  return result\r\n    ? [\r\n        parseInt(result[1], 16) / 255,\r\n        parseInt(result[2], 16) / 255,\r\n        parseInt(result[3], 16) / 255,\r\n      ]\r\n    : [0, 0, 0];\r\n}\r\n\r\nexport function useFluidAnimation(\r\n  canvasRef: React.RefObject<HTMLCanvasElement>,\r\n  config: FluidLightConfig\r\n) {\r\n  const glRef = useRef<WebGLRenderingContext | null>(null);\r\n  const programRef = useRef<WebGLProgram | null>(null);\r\n  const uniformsRef = useRef<FluidUniforms | null>(null);\r\n  const startTimeRef = useRef<number>(Date.now());\r\n  const animationFrameRef = useRef<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const gl = canvas.getContext('webgl');\r\n    if (!gl) {\r\n      console.error('WebGL not supported');\r\n      return;\r\n    }\r\n\r\n    glRef.current = gl;\r\n\r\n    // Resize canvas\r\n    const resize = () => {\r\n      canvas.width = window.innerWidth;\r\n      canvas.height = window.innerHeight;\r\n      gl.viewport(0, 0, canvas.width, canvas.height);\r\n    };\r\n    resize();\r\n\r\n    // Compile shaders\r\n    const compileShader = (source: string, type: number) => {\r\n      const shader = gl.createShader(type);\r\n      if (!shader) return null;\r\n      gl.shaderSource(shader, source);\r\n      gl.compileShader(shader);\r\n      return shader;\r\n    };\r\n\r\n    const program = gl.createProgram();\r\n    if (!program) return;\r\n\r\n    const vs = compileShader(vertexShader, gl.VERTEX_SHADER);\r\n    const fs = compileShader(fragmentShader, gl.FRAGMENT_SHADER);\r\n    if (!vs || !fs) return;\r\n\r\n    gl.attachShader(program, vs);\r\n    gl.attachShader(program, fs);\r\n    gl.linkProgram(program);\r\n    gl.useProgram(program);\r\n\r\n    programRef.current = program;\r\n\r\n    // Create vertex buffer\r\n    const buffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n    gl.bufferData(\r\n      gl.ARRAY_BUFFER,\r\n      new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]),\r\n      gl.STATIC_DRAW\r\n    );\r\n\r\n    const positionLocation = gl.getAttribLocation(program, 'position');\r\n    gl.enableVertexAttribArray(positionLocation);\r\n    gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\r\n\r\n    // Get uniform locations\r\n    uniformsRef.current = {\r\n      res: gl.getUniformLocation(program, 'iResolution'),\r\n      time: gl.getUniformLocation(program, 'iTime'),\r\n      bg: gl.getUniformLocation(program, 'bg_color'),\r\n      p1c: gl.getUniformLocation(program, 'p1_color'),\r\n      p1o: gl.getUniformLocation(program, 'p1_opacity'),\r\n      p1s: gl.getUniformLocation(program, 'p1_scale'),\r\n      p2c: gl.getUniformLocation(program, 'p2_color'),\r\n      p2o: gl.getUniformLocation(program, 'p2_opacity'),\r\n      p2s: gl.getUniformLocation(program, 'p2_scale'),\r\n      p3c: gl.getUniformLocation(program, 'p3_color'),\r\n      p3o: gl.getUniformLocation(program, 'p3_opacity'),\r\n      p3s: gl.getUniformLocation(program, 'p3_scale'),\r\n      p4c: gl.getUniformLocation(program, 'p4_color'),\r\n      p4o: gl.getUniformLocation(program, 'p4_opacity'),\r\n      p4s: gl.getUniformLocation(program, 'p4_scale'),\r\n    };\r\n\r\n    // Animation loop\r\n    const animate = () => {\r\n      if (!gl || !uniformsRef.current) return;\r\n\r\n      const u = uniformsRef.current;\r\n      const bgColor = hexToRgb(config.backgroundColor);\r\n      const patternColor = hexToRgb(config.patternColor);\r\n\r\n      gl.uniform2f(u.res, canvas.width, canvas.height);\r\n      gl.uniform1f(\r\n        u.time,\r\n        ((Date.now() - startTimeRef.current) / 1000) * config.animationSpeed\r\n      );\r\n      gl.uniform3fv(u.bg, bgColor);\r\n      gl.uniform3fv(u.p1c, patternColor);\r\n      gl.uniform1f(u.p1o, config.patternOpacity);\r\n      gl.uniform1f(u.p1s, config.pattern1Scale);\r\n      gl.uniform3fv(u.p2c, patternColor);\r\n      gl.uniform1f(u.p2o, config.patternOpacity);\r\n      gl.uniform1f(u.p2s, config.pattern2Scale);\r\n      gl.uniform3fv(u.p3c, patternColor);\r\n      gl.uniform1f(u.p3o, config.patternOpacity);\r\n      gl.uniform1f(u.p3s, config.pattern3Scale);\r\n      gl.uniform3fv(u.p4c, patternColor);\r\n      gl.uniform1f(u.p4o, config.patternOpacity);\r\n      gl.uniform1f(u.p4s, config.pattern4Scale);\r\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n\r\n      animationFrameRef.current = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animate();\r\n\r\n    // Handle resize\r\n    window.addEventListener('resize', resize);\r\n\r\n    // Cleanup\r\n    return () => {\r\n      window.removeEventListener('resize', resize);\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n    };\r\n  }, [canvasRef, config]);\r\n\r\n  return glRef;\r\n}","import { useEffect, useRef, useState } from 'react';\r\nimport type { FluidLightConfig, LightSpot } from './types';\r\n\r\nfunction calculateAgeFade(\r\n  ageFactor: number,\r\n  type: FluidLightConfig['ageFadeType'],\r\n  strength: number\r\n): number {\r\n  if (type === 'none' || strength === 0) {\r\n    return 1.0;\r\n  }\r\n\r\n  let fadeFactor = 1.0;\r\n\r\n  switch (type) {\r\n    case 'linear':\r\n      fadeFactor = 1.0 - ageFactor;\r\n      break;\r\n    case 'exponential':\r\n      fadeFactor = Math.pow(1.0 - ageFactor, 2);\r\n      break;\r\n    case 'logarithmic':\r\n      fadeFactor = 1.0 - Math.pow(ageFactor, 0.5);\r\n      break;\r\n  }\r\n\r\n  return 1.0 - (1.0 - fadeFactor) * strength;\r\n}\r\n\r\nexport function useLightBlobs(\r\n  maskCanvasRef: React.RefObject<HTMLCanvasElement>,\r\n  fluidCanvasRef: React.RefObject<HTMLCanvasElement>,\r\n  config: FluidLightConfig,\r\n  showDebug: boolean\r\n) {\r\n  const [debugInfo, setDebugInfo] = useState({ spots: 0, fps: 0 });\r\n  const lightSpotsRef = useRef<LightSpot[]>([]);\r\n  const mouseRef = useRef({ x: 0, y: 0, prevX: 0, prevY: 0 });\r\n  const velocityRef = useRef({ x: 0, y: 0 });\r\n  const mainBlobRef = useRef({\r\n    currentRadius: 0,\r\n    currentOpacity: 0,\r\n    lastMoveTime: Date.now(),\r\n  });\r\n  const fpsRef = useRef({ frameCount: 0, lastFpsTime: Date.now(), fps: 0 });\r\n  const animationFrameRef = useRef<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    const maskCanvas = maskCanvasRef.current;\r\n    const fluidCanvas = fluidCanvasRef.current;\r\n    if (!maskCanvas || !fluidCanvas) return;\r\n\r\n    const ctx = maskCanvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    // Resize canvas\r\n    const resize = () => {\r\n      maskCanvas.width = window.innerWidth;\r\n      maskCanvas.height = window.innerHeight;\r\n    };\r\n    resize();\r\n\r\n    // Mouse tracking\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      mouseRef.current.x = e.clientX;\r\n      mouseRef.current.y = e.clientY;\r\n    };\r\n\r\n    // Light spot management\r\n    const addLightSpot = (\r\n      x: number,\r\n      y: number,\r\n      opacity: number,\r\n      velX: number,\r\n      velY: number\r\n    ) => {\r\n      lightSpotsRef.current.push({\r\n        x,\r\n        y,\r\n        opacity,\r\n        baseOpacity: opacity,\r\n        radius: config.baseRadius,\r\n        velX,\r\n        velY,\r\n        age: 0,\r\n        createdAt: Date.now(),\r\n      });\r\n\r\n      if (lightSpotsRef.current.length > 150) {\r\n        lightSpotsRef.current.shift();\r\n      }\r\n    };\r\n\r\n    const updateLightSpots = () => {\r\n      for (let i = lightSpotsRef.current.length - 1; i >= 0; i--) {\r\n        const spot = lightSpotsRef.current[i];\r\n        spot.age++;\r\n\r\n        const ageFactor = Math.min(spot.age * config.fadeSpeed, 1.0);\r\n        spot.opacity -= config.fadeSpeed;\r\n        spot.radius -= config.fadeSpeed * 100 * config.trailTaper;\r\n\r\n        const ageFadeMultiplier = calculateAgeFade(\r\n          ageFactor,\r\n          config.ageFadeType,\r\n          config.ageFadeStrength\r\n        );\r\n\r\n        const finalOpacity = spot.opacity * ageFadeMultiplier;\r\n\r\n        if (finalOpacity <= 0.01 || spot.radius <= 10) {\r\n          lightSpotsRef.current.splice(i, 1);\r\n          continue;\r\n        }\r\n\r\n        spot.renderOpacity = finalOpacity;\r\n      }\r\n    };\r\n\r\n    const drawLightSpot = (spot: LightSpot) => {\r\n      ctx.save();\r\n\r\n      const opacity =\r\n        spot.renderOpacity !== undefined ? spot.renderOpacity : spot.opacity;\r\n\r\n      const gradient = ctx.createRadialGradient(\r\n        spot.x,\r\n        spot.y,\r\n        0,\r\n        spot.x,\r\n        spot.y,\r\n        spot.radius + config.blurAmount\r\n      );\r\n      gradient.addColorStop(0, `rgba(255, 255, 255, ${opacity})`);\r\n      gradient.addColorStop(0.6, `rgba(255, 255, 255, ${opacity * 0.5})`);\r\n      gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\r\n\r\n      ctx.beginPath();\r\n      ctx.arc(\r\n        spot.x,\r\n        spot.y,\r\n        spot.radius + config.blurAmount,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.fillStyle = gradient;\r\n      ctx.filter = `blur(${config.blurAmount}px)`;\r\n      ctx.fill();\r\n\r\n      ctx.restore();\r\n    };\r\n\r\n    // Animation loop\r\n    const animate = () => {\r\n      ctx.clearRect(0, 0, maskCanvas.width, maskCanvas.height);\r\n\r\n      const mouse = mouseRef.current;\r\n      const velocity = velocityRef.current;\r\n      const mainBlob = mainBlobRef.current;\r\n\r\n      // Calculate mouse movement\r\n      const dx = mouse.x - mouse.prevX;\r\n      const dy = mouse.y - mouse.prevY;\r\n      const hasMoved = dx !== 0 || dy !== 0;\r\n\r\n      velocity.x = velocity.x * 0.8 + dx * 0.2;\r\n      velocity.y = velocity.y * 0.8 + dy * 0.2;\r\n\r\n      // Determine if blobs should be active\r\n      const timeSinceLastMove = Date.now() - mainBlob.lastMoveTime;\r\n      const isInDelayPeriod = timeSinceLastMove <= config.closeDelay;\r\n\r\n      let shouldBeActive = false;\r\n      if (hasMoved) {\r\n        mainBlob.lastMoveTime = Date.now();\r\n        shouldBeActive = true;\r\n      } else {\r\n        shouldBeActive = isInDelayPeriod;\r\n      }\r\n\r\n      // Animate main blob\r\n      if (shouldBeActive) {\r\n        const openSpeed = config.mainCloseSpeed * 100;\r\n        mainBlob.currentRadius += openSpeed;\r\n        if (mainBlob.currentRadius > config.baseRadius) {\r\n          mainBlob.currentRadius = config.baseRadius;\r\n        }\r\n\r\n        const radiusRatio = mainBlob.currentRadius / config.baseRadius;\r\n        mainBlob.currentOpacity = config.currentOpacity * radiusRatio;\r\n      } else {\r\n        mainBlob.currentRadius -=\r\n          config.mainCloseSpeed * 100 * config.mainCloseTaper;\r\n        if (mainBlob.currentRadius < 0) mainBlob.currentRadius = 0;\r\n\r\n        const radiusRatio = mainBlob.currentRadius / config.baseRadius;\r\n        mainBlob.currentOpacity = config.currentOpacity * radiusRatio;\r\n      }\r\n\r\n      // Create trail spots\r\n      if (shouldBeActive && (hasMoved || isInDelayPeriod)) {\r\n        const trailOpacity = config.currentOpacity * config.trailMultiplier;\r\n        addLightSpot(mouse.x, mouse.y, trailOpacity, velocity.x, velocity.y);\r\n      }\r\n\r\n      updateLightSpots();\r\n\r\n      // Draw light spots\r\n      ctx.globalCompositeOperation = 'source-over';\r\n      lightSpotsRef.current.forEach((spot) => {\r\n        drawLightSpot(spot);\r\n      });\r\n\r\n      // Draw current position\r\n      if (mainBlob.currentRadius > 0) {\r\n        drawLightSpot({\r\n          x: mouse.x,\r\n          y: mouse.y,\r\n          opacity: mainBlob.currentOpacity,\r\n          baseOpacity: mainBlob.currentOpacity,\r\n          radius: mainBlob.currentRadius,\r\n          velX: velocity.x,\r\n          velY: velocity.y,\r\n          age: 0,\r\n          createdAt: Date.now(),\r\n        });\r\n      }\r\n\r\n      // Apply fluid pattern mask\r\n      ctx.globalCompositeOperation = 'source-in';\r\n      ctx.drawImage(fluidCanvas, 0, 0);\r\n      ctx.globalCompositeOperation = 'source-over';\r\n\r\n      // Update FPS\r\n      const fps = fpsRef.current;\r\n      fps.frameCount++;\r\n      const now = Date.now();\r\n      if (now - fps.lastFpsTime >= 1000) {\r\n        fps.fps = fps.frameCount;\r\n        fps.frameCount = 0;\r\n        fps.lastFpsTime = now;\r\n        \r\n        if (showDebug) {\r\n          setDebugInfo({\r\n            spots: lightSpotsRef.current.length + 1,\r\n            fps: fps.fps,\r\n          });\r\n        }\r\n      }\r\n\r\n      mouse.prevX = mouse.x;\r\n      mouse.prevY = mouse.y;\r\n\r\n      animationFrameRef.current = requestAnimationFrame(animate);\r\n    };\r\n\r\n    // Initialize mouse position\r\n    mouseRef.current.x = window.innerWidth / 2;\r\n    mouseRef.current.y = window.innerHeight / 2;\r\n    mouseRef.current.prevX = mouseRef.current.x;\r\n    mouseRef.current.prevY = mouseRef.current.y;\r\n\r\n    // Start animation\r\n    animate();\r\n\r\n    // Event listeners\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    window.addEventListener('resize', resize);\r\n\r\n    // Cleanup\r\n    return () => {\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      window.removeEventListener('resize', resize);\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n    };\r\n  }, [maskCanvasRef, fluidCanvasRef, config, showDebug]);\r\n\r\n  return debugInfo;\r\n}","import type { FluidLightConfig } from './types';\r\n\r\nexport const DEFAULT_CONFIG: FluidLightConfig = {\r\n  // Light blob settings (exactly as in your prototype)\r\n  baseRadius: 190,\r\n  blurAmount: 30,\r\n  currentOpacity: 0.9,\r\n  trailMultiplier: 0.4,\r\n  fadeSpeed: 0.007,\r\n  trailTaper: 2.0,\r\n\r\n  // Age fade settings\r\n  ageFadeType: 'exponential',\r\n  ageFadeStrength: 0.7,\r\n\r\n  // Main blob animation\r\n  closeDelay: 300,\r\n  mainCloseSpeed: 0.01,\r\n  mainCloseTaper: 1.0,\r\n\r\n  // Fluid pattern settings\r\n  backgroundColor: '#000000',\r\n  patternColor: '#0d00ff',\r\n  patternOpacity: 1,\r\n\r\n  // Pattern scales\r\n  pattern1Scale: 1.5,\r\n  pattern2Scale: 0.5,\r\n  pattern3Scale: 0.3,\r\n  pattern4Scale: 0.3,\r\n\r\n  // Animation\r\n  animationSpeed: 1.0,\r\n};","import React, { useRef, useMemo } from 'react';\r\nimport { useFluidAnimation } from './useFluidAnimation';\r\nimport { useLightBlobs } from './useLightBlobs';\r\nimport { DEFAULT_CONFIG } from './config';\r\nimport type { FluidLightPatternProps, FluidLightConfig } from './types';\r\nimport styles from './FluidLightPattern.module.css';\r\n\r\nexport const FluidLightPattern: React.FC<FluidLightPatternProps> = ({\r\n  fullscreen = false,\r\n  className,\r\n  style,\r\n  config: configOverrides,\r\n  showDebug = false,\r\n  zIndex = { fluid: 1, mask: 2 },\r\n}) => {\r\n  const fluidCanvasRef = useRef<HTMLCanvasElement>(null);\r\n  const maskCanvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  // Merge default config with overrides\r\n  const config: FluidLightConfig = useMemo(\r\n    () => ({\r\n      ...DEFAULT_CONFIG,\r\n      ...configOverrides,\r\n    }),\r\n    [configOverrides]\r\n  );\r\n\r\n  // Initialize WebGL fluid animation\r\n  useFluidAnimation(fluidCanvasRef, config);\r\n\r\n  // Initialize light blobs animation\r\n  const debugInfo = useLightBlobs(\r\n    maskCanvasRef,\r\n    fluidCanvasRef,\r\n    config,\r\n    showDebug\r\n  );\r\n\r\n  const containerClassName = `${styles.container} ${\r\n    fullscreen ? styles.containerFullscreen : ''\r\n  } ${className || ''}`.trim();\r\n\r\n  return (\r\n    <div className={containerClassName} style={style}>\r\n      <canvas\r\n        ref={fluidCanvasRef}\r\n        className={styles.fluidCanvas}\r\n        style={{ zIndex: zIndex.fluid }}\r\n      />\r\n      <canvas\r\n        ref={maskCanvasRef}\r\n        className={styles.maskCanvas}\r\n        style={{ zIndex: zIndex.mask }}\r\n      />\r\n      {showDebug && (\r\n        <div className={styles.debug}>\r\n          Light spots: {debugInfo.spots}\r\n          <br />\r\n          FPS: {debugInfo.fps}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nFluidLightPattern.displayName = 'FluidLightPattern';"],"names":["vertexShader","fragmentShader","hexToRgb","hex","result","useFluidAnimation","canvasRef","config","glRef","useRef","programRef","uniformsRef","startTimeRef","animationFrameRef","useEffect","canvas","gl","resize","compileShader","source","type","shader","program","vs","fs","buffer","positionLocation","animate","u","bgColor","patternColor","calculateAgeFade","ageFactor","strength","fadeFactor","useLightBlobs","maskCanvasRef","fluidCanvasRef","showDebug","debugInfo","setDebugInfo","useState","lightSpotsRef","mouseRef","velocityRef","mainBlobRef","fpsRef","maskCanvas","fluidCanvas","ctx","handleMouseMove","e","addLightSpot","x","y","opacity","velX","velY","updateLightSpots","i","spot","ageFadeMultiplier","finalOpacity","drawLightSpot","gradient","mouse","velocity","mainBlob","dx","dy","hasMoved","isInDelayPeriod","shouldBeActive","openSpeed","radiusRatio","trailOpacity","fps","now","DEFAULT_CONFIG","FluidLightPattern","fullscreen","className","style","configOverrides","zIndex","useMemo","containerClassName","styles","jsxs","jsx"],"mappings":"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"}